/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
var APP;
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _nn_neural_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./nn/neural_network */ \"./src/js/nn/neural_network.js\");\n/* harmony import */ var _nn_dataset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nn/dataset */ \"./src/js/nn/dataset.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** App */\n\n\n\nvar App = /*#__PURE__*/function () {\n  function App() {\n    var _this = this;\n\n    _classCallCheck(this, App);\n\n    this.modules = {\n      dataset: new _nn_dataset__WEBPACK_IMPORTED_MODULE_1__[\"default\"](),\n      neuralNetwork: new _nn_neural_network__WEBPACK_IMPORTED_MODULE_0__[\"default\"]()\n    };\n    this.call('bind');\n    window.addEventListener('resize', function () {\n      _this.call('refresh');\n    });\n  }\n\n  _createClass(App, [{\n    key: \"call\",\n    value: function call(func) {\n      for (var key in this.modules) {\n        if (typeof this.modules[key][func] === 'function') {\n          this.modules[key][func](this);\n        }\n      }\n    }\n  }]);\n\n  return App;\n}();\n\nwindow.addEventListener('load', function () {\n  var app = new App();\n});\n\n//# sourceURL=webpack://APP/./src/js/app.js?");

/***/ }),

/***/ "./src/js/maths/relu.js":
/*!******************************!*\
  !*** ./src/js/maths/relu.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ReLU\": () => (/* binding */ ReLU),\n/* harmony export */   \"ReLUDerivative\": () => (/* binding */ ReLUDerivative)\n/* harmony export */ });\n/** RELU activation function */\nvar ReLU = function ReLU(x) {\n  return Math.max(0, x);\n};\n\nvar ReLUDerivative = function ReLUDerivative(x) {\n  return x > 0 ? 1 : 0;\n};\n\n\n\n//# sourceURL=webpack://APP/./src/js/maths/relu.js?");

/***/ }),

/***/ "./src/js/maths/round.js":
/*!*******************************!*\
  !*** ./src/js/maths/round.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/** Round */\nvar Round = function Round(x, places) {\n  var d = Math.pow(10, places);\n  return Math.round(x * d) / d;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Round);\n\n//# sourceURL=webpack://APP/./src/js/maths/round.js?");

/***/ }),

/***/ "./src/js/maths/sigmoid.js":
/*!*********************************!*\
  !*** ./src/js/maths/sigmoid.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Sigmoid\": () => (/* binding */ Sigmoid),\n/* harmony export */   \"SigmoidDerivative\": () => (/* binding */ SigmoidDerivative)\n/* harmony export */ });\n/** Sigmoid activation function */\nvar Sigmoid = function Sigmoid(x) {\n  return 1 / (1 + Math.exp(-x));\n};\n\nvar SigmoidDerivative = function SigmoidDerivative(x) {\n  return x * (1 - x);\n};\n\n\n\n//# sourceURL=webpack://APP/./src/js/maths/sigmoid.js?");

/***/ }),

/***/ "./src/js/nn/activation.js":
/*!*********************************!*\
  !*** ./src/js/nn/activation.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _maths_sigmoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../maths/sigmoid */ \"./src/js/maths/sigmoid.js\");\n/* harmony import */ var _maths_relu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../maths/relu */ \"./src/js/maths/relu.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** Activation functions */\n\n\n\nvar Activation = /*#__PURE__*/function () {\n  function Activation() {\n    _classCallCheck(this, Activation);\n  }\n\n  _createClass(Activation, null, [{\n    key: \"getValue\",\n    value: function getValue(type, x) {\n      switch (type) {\n        case Activation.SIGMOID:\n          return (0,_maths_sigmoid__WEBPACK_IMPORTED_MODULE_0__.Sigmoid)(x);\n          break;\n\n        case Activation.RELU:\n          return (0,_maths_relu__WEBPACK_IMPORTED_MODULE_1__.ReLU)(x);\n          break;\n\n        default:\n          return x;\n          break;\n      }\n    }\n  }, {\n    key: \"getDerivative\",\n    value: function getDerivative(type, x) {\n      switch (type) {\n        case Activation.SIGMOID:\n          return (0,_maths_sigmoid__WEBPACK_IMPORTED_MODULE_0__.SigmoidDerivative)(x);\n          break;\n\n        case Activation.RELU:\n          return (0,_maths_relu__WEBPACK_IMPORTED_MODULE_1__.ReLUDerivative)(x);\n          break;\n\n        default:\n          return 0;\n          break;\n      }\n    }\n  }]);\n\n  return Activation;\n}();\n\n_defineProperty(Activation, \"SIGMOID\", 'SIGMOID');\n\n_defineProperty(Activation, \"RELU\", 'RELU');\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Activation);\n\n//# sourceURL=webpack://APP/./src/js/nn/activation.js?");

/***/ }),

/***/ "./src/js/nn/dataset.js":
/*!******************************!*\
  !*** ./src/js/nn/dataset.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _util_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/element */ \"./src/js/util/element.js\");\n/* harmony import */ var _maths_round__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../maths/round */ \"./src/js/maths/round.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** Dataset */\n\n // visualiser\n\nvar MAX_VISIBLE_DATA_ITEMS = 100; // network settings\n\nvar HIDDEN_LAYER_SIZE_REDUCER = 3; // data shaping\n\nvar PADDING_VALUE = -1;\nvar MAXIMUM_INPUT_SIZE = 5;\nvar MINIMUM_TOTAL_SIZE = MAXIMUM_INPUT_SIZE + 1;\nvar MAXIMUM_INPUT_VALUE = 9;\n\nvar Dataset = /*#__PURE__*/function () {\n  function Dataset() {\n    _classCallCheck(this, Dataset);\n\n    this.data = [];\n    this.tokenMap = {};\n    this.tokensUsed = {};\n    this.currentIndex = 0;\n    this.inputSize = null;\n    this.outputSize = null;\n  }\n\n  _createClass(Dataset, [{\n    key: \"bind\",\n    value: function bind(root) {\n      var _this = this;\n\n      this.ref = {};\n      this.ref.neuralNetwork = root.modules.neuralNetwork; // load data\n\n      fetch('./data/data.txt').then(function (res) {\n        return res.text();\n      }).then(function (text) {\n        _this.processRawData(text);\n\n        _this.render();\n\n        _this.ref.neuralNetwork.onDatasetLoaded();\n      });\n    }\n  }, {\n    key: \"processRawData\",\n    value: function processRawData(text) {\n      var _this2 = this;\n\n      // tokenise data (0-9 => 0-9), (symbols=negative numbers)\n      var data = text.split('\\r\\n');\n      data = data.filter(function (row) {\n        return row !== '' && row.indexOf(';') !== -1;\n      });\n      data = data.map(function (row) {\n        return _this2.tokenise(row.split(';')[1]);\n      }); // filter non-numerical data (negative tokens) i.e. xP-F\n\n      data = data.map(function (row) {\n        return row.filter(function (value) {\n          return value >= 0;\n        });\n      }); // remove short data\n\n      data = data.filter(function (row) {\n        return row.length >= MINIMUM_TOTAL_SIZE;\n      }); // shift data down 1 mod 10 (1->0, 0->9)\n\n      data.forEach(function (row) {\n        for (var i = 0; i < row.length; i++) {\n          row[i] = row[i] == 0 ? 9 : row[i] - 1;\n        }\n      }); // pad data left\n\n      var max = Math.max.apply(Math, _toConsumableArray(data.map(function (row) {\n        return row.length;\n      })));\n      data = data.map(function (row) {\n        row.unshift.apply(row, _toConsumableArray(new Array(max - row.length).fill(PADDING_VALUE)));\n        return row;\n      }); // get input & output data\n\n      data = data.map(function (row) {\n        return {\n          input: row.slice(0, row.length - 1),\n          output: row[row.length - 1]\n        };\n      }); // resize input data\n\n      data.forEach(function (row) {\n        row.input = row.input.slice(row.input.length - MAXIMUM_INPUT_SIZE);\n      }); // normalise input data\n\n      data.forEach(function (row) {\n        _this2.normalise(row.input);\n      }); // set data, shuffle\n\n      this.data = data;\n      this.shuffleData();\n    }\n  }, {\n    key: \"tokenise\",\n    value: function tokenise(data) {\n      var _this3 = this;\n\n      return data.split('').map(function (char) {\n        if (_this3.tokenMap[char] === undefined) {\n          // get int token\n          if (!Number.isNaN(parseInt(char))) {\n            _this3.tokenMap[char] = parseInt(char); // find next NaN token\n          } else {\n            var n = -1;\n\n            while (_this3.tokensUsed[n]) {\n              n -= 1;\n            }\n\n            _this3.tokenMap[char] = n;\n          }\n        }\n\n        _this3.tokensUsed[_this3.tokenMap[char]] = true;\n        return _this3.tokenMap[char];\n      });\n    }\n  }, {\n    key: \"normalise\",\n    value: function normalise(values) {\n      for (var i = 0; i < values.length; i++) {\n        values[i] /= MAXIMUM_INPUT_VALUE;\n      }\n    }\n  }, {\n    key: \"setError\",\n    value: function setError(index, error) {\n      this.data[index].error = error;\n    }\n  }, {\n    key: \"getError\",\n    value: function getError(index) {\n      return this.data[index].error;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (index !== null) {\n        return this.data[index];\n      }\n\n      return this.data;\n    }\n  }, {\n    key: \"getCurrentIndex\",\n    value: function getCurrentIndex() {\n      return this.currentIndex;\n    }\n  }, {\n    key: \"nextIndex\",\n    value: function nextIndex() {\n      this.currentIndex = (this.currentIndex + 1) % this.data.length;\n    }\n  }, {\n    key: \"getInputSize\",\n    value: function getInputSize() {\n      if (this.inputSize === null) {\n        this.inputSize = this.data[0].input.length;\n      }\n\n      return this.inputSize;\n    }\n  }, {\n    key: \"getOutputSize\",\n    value: function getOutputSize() {\n      if (this.outputSize === null) {\n        this.outputSize = Math.max.apply(Math, _toConsumableArray(this.data.map(function (row) {\n          return row.output;\n        }))) + 1;\n      }\n\n      return this.outputSize;\n    }\n  }, {\n    key: \"getHiddenLayerSize\",\n    value: function getHiddenLayerSize() {\n      // calculate roughly appropriate hidden layer size\n      // nSamples / (a * (nInput + nOutput))\n      var nInput = this.getInputSize();\n      var nOutput = this.getOutputSize();\n      var nSamples = this.data.length;\n      var s = nSamples / (HIDDEN_LAYER_SIZE_REDUCER * (nInput + nOutput));\n      return Math.round(s);\n    }\n  }, {\n    key: \"getOutputArray\",\n    value: function getOutputArray(index) {\n      var size = this.getOutputSize();\n      var arr = new Array(size).fill(0);\n      arr[index] = 1;\n      return arr;\n    }\n  }, {\n    key: \"getDataSize\",\n    value: function getDataSize() {\n      return this.data.length;\n    }\n  }, {\n    key: \"onDataSelected\",\n    value: function onDataSelected(index) {\n      this.currentIndex = index;\n      console.log(this.getData(this.currentIndex));\n      this.ref.neuralNetwork.forwardSingle();\n      this.ref.neuralNetwork.refresh();\n    }\n  }, {\n    key: \"shuffleData\",\n    value: function shuffleData() {\n      for (var i = this.data.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        this.data[i].index = j;\n        this.data[j].index = i;\n        var _ref = [this.data[j], this.data[i]];\n        this.data[i] = _ref[0];\n        this.data[j] = _ref[1];\n      }\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var _this4 = this;\n\n      this.el.querySelectorAll('.data.active').forEach(function (el) {\n        return el.classList.remove('active');\n      });\n      this.data.forEach(function (row, i) {\n        if (!row.visible) return; // set update index (shuffled each epoch)\n\n        row.el.dataset.index = i;\n        row.el.parentNode.appendChild(row.el); // set error\n\n        var err = row.error !== undefined ? (0,_maths_round__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(row.error, 4) : 'n/a';\n        row.el.querySelector('.data-error').innerText = err;\n\n        if (_this4.currentIndex == i) {\n          row.el.classList.add('active');\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      this.el = (0,_util_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        class: 'dataset',\n        children: [{\n          class: 'dataset__header',\n          innerText: \"DATASET (n=\".concat(this.data.length, \", showing=\").concat(MAX_VISIBLE_DATA_ITEMS, \")\")\n        }, {\n          class: 'dataset__body'\n        }]\n      }); // add data elements -- get dom refs\n\n      var datasetBody = this.el.querySelector('.dataset__body');\n      this.data.forEach(function (row, i) {\n        row.visible = i < MAX_VISIBLE_DATA_ITEMS;\n        if (!row.visible) return;\n        row.el = (0,_util_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n          class: 'data',\n          dataset: {\n            index: i\n          },\n          children: [{\n            class: 'data-input',\n            innerText: row.input.map(function (v) {\n              return Math.round(v * MAXIMUM_INPUT_VALUE);\n            }).join(' ')\n          }, {\n            class: 'data-output',\n            innerText: row.output\n          }, {\n            class: 'data-error'\n          }],\n          addEventListener: {\n            click: function click() {\n              _this5.onDataSelected(row.index);\n            }\n          }\n        });\n        datasetBody.appendChild(row.el);\n      }); // add to doc\n\n      this.domTarget = document.querySelector('#dataset');\n      this.domTarget.appendChild(this.el);\n    }\n  }]);\n\n  return Dataset;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dataset);\n\n//# sourceURL=webpack://APP/./src/js/nn/dataset.js?");

/***/ }),

/***/ "./src/js/nn/layer.js":
/*!****************************!*\
  !*** ./src/js/nn/layer.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _neuron__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./neuron */ \"./src/js/nn/neuron.js\");\n/* harmony import */ var _synapse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./synapse */ \"./src/js/nn/synapse.js\");\n/* harmony import */ var _util_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/element */ \"./src/js/util/element.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** Layer */\n\n\n\n\nvar Layer = /*#__PURE__*/function () {\n  function Layer(params) {\n    _classCallCheck(this, Layer);\n\n    this.params = params;\n    this.neurons = [];\n    this.synapses = [];\n    var size = params.size || 0;\n    var p = {};\n    if (params.bias !== undefined) p.bias = params.bias;\n    if (params.activation !== undefined) p.activation = params.activation;\n\n    for (var i = 0; i < size; i++) {\n      this.neurons.push(new _neuron__WEBPACK_IMPORTED_MODULE_0__[\"default\"](_objectSpread({\n        index: i\n      }, p)));\n    }\n\n    this.render();\n  }\n\n  _createClass(Layer, [{\n    key: \"setValues\",\n    value: function setValues(values) {\n      var _this = this;\n\n      values.forEach(function (v, i) {\n        _this.neurons[i].setValue(v);\n      });\n    }\n  }, {\n    key: \"connect\",\n    value: function connect(layer) {\n      var _this2 = this;\n\n      this.neurons.forEach(function (src) {\n        layer.neurons.forEach(function (dst) {\n          var conn = new _synapse__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            src: src,\n            dst: dst\n          });\n\n          _this2.synapses.push(conn);\n        });\n      });\n    }\n  }, {\n    key: \"forward\",\n    value: function forward() {\n      this.neurons.forEach(function (neuron) {\n        return neuron.calculateWeightedInput();\n      });\n      this.neurons.forEach(function (neuron) {\n        return neuron.activate();\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.synapses.forEach(function (conn) {\n        return conn.reset();\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.neurons.forEach(function (neuron) {\n        return neuron.refresh();\n      });\n      this.synapses.forEach(function (conn) {\n        return conn.refresh();\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var json = {};\n      json.size = this.neurons.length;\n      if (this.params.bias !== undefined) json.bias = this.params.bias;\n      if (this.params.activation !== undefined) json.activation = this.params.activation;\n      json.weights = [];\n      this.neurons.forEach(function (neuron) {\n        if (neuron.hasOutput()) {\n          var weights = neuron.connections.out.map(function (conn) {\n            return conn.getWeight();\n          });\n          json.weights.push(weights);\n        }\n      });\n      return json;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var neuronElements = this.neurons.map(function (neuron) {\n        return neuron.visible ? neuron.el : null;\n      }).filter(function (x) {\n        return x !== null;\n      });\n      this.el = (0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        class: 'layer',\n        children: [{\n          class: 'layer__header',\n          children: [{\n            innerText: \"(\".concat(this.params.size, \")\")\n          }]\n        }, {\n          class: 'layer__neurons',\n          children: neuronElements\n        }, {\n          class: 'layer__footer'\n        }]\n      });\n\n      if (this.params.bias !== undefined) {\n        this.el.querySelector('.layer__footer').appendChild((0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n          innerText: \"BIAS(\".concat(this.params.bias, \")\")\n        }));\n      }\n\n      if (this.params.activation !== undefined) {\n        this.el.querySelector('.layer__footer').appendChild((0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n          innerText: \"Z(\".concat(this.params.activation, \")\")\n        }));\n      }\n    }\n  }]);\n\n  return Layer;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Layer);\n\n//# sourceURL=webpack://APP/./src/js/nn/layer.js?");

/***/ }),

/***/ "./src/js/nn/neural_network.js":
/*!*************************************!*\
  !*** ./src/js/nn/neural_network.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layer */ \"./src/js/nn/layer.js\");\n/* harmony import */ var _activation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./activation */ \"./src/js/nn/activation.js\");\n/* harmony import */ var _util_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/element */ \"./src/js/util/element.js\");\n/* harmony import */ var _maths_round__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../maths/round */ \"./src/js/maths/round.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** Neural network */\n\n\n\n\nvar LEARNING_RATE = 0.01;\n\nvar NeuralNetwork = /*#__PURE__*/function () {\n  function NeuralNetwork() {\n    _classCallCheck(this, NeuralNetwork);\n\n    this.stats = {\n      learningRate: LEARNING_RATE,\n      epochs: 0,\n      steps: 0,\n      dff: 0,\n      totalError: 0,\n      averageError: 0\n    };\n  }\n\n  _createClass(NeuralNetwork, [{\n    key: \"bind\",\n    value: function bind(root) {\n      this.ref = {};\n      this.ref.dataset = root.modules.dataset;\n    }\n  }, {\n    key: \"onDatasetLoaded\",\n    value: function onDatasetLoaded() {\n      var _this = this;\n\n      // create layers\n      this.layers = [{\n        size: this.ref.dataset.getInputSize()\n      }, // { size: this.ref.dataset.getHiddenLayerSize(), bias: 0, activation: Activation.SIGMOID },\n      {\n        size: this.ref.dataset.getHiddenLayerSize(),\n        bias: 0,\n        activation: _activation__WEBPACK_IMPORTED_MODULE_1__[\"default\"].SIGMOID\n      }, {\n        size: 6,\n        bias: 0,\n        activation: _activation__WEBPACK_IMPORTED_MODULE_1__[\"default\"].SIGMOID\n      }, {\n        size: this.ref.dataset.getHiddenLayerSize(),\n        bias: 0,\n        activation: _activation__WEBPACK_IMPORTED_MODULE_1__[\"default\"].SIGMOID\n      }, // { size: this.ref.dataset.getOutputSize(), bias: 1, activation: Activation.SIGMOID },\n      {\n        size: this.ref.dataset.getOutputSize(),\n        activation: _activation__WEBPACK_IMPORTED_MODULE_1__[\"default\"].SIGMOID\n      }].map(function (params) {\n        return new _layer__WEBPACK_IMPORTED_MODULE_0__[\"default\"](params);\n      }); // connect neurons\n\n      for (var i = 0; i < this.layers.length; i++) {\n        if (i + 1 < this.layers.length) {\n          this.layers[i].connect(this.layers[i + 1]);\n        }\n      } // layer refs\n\n\n      this.inputLayer = this.layers[0];\n      this.hiddenLayers = this.layers.filter(function (layer, i) {\n        return i > 0 && i < _this.layers.length - 1;\n      });\n      this.outputLayer = this.layers[this.layers.length - 1]; // render UI\n\n      this.render(); // set initial\n\n      this.reset();\n    }\n  }, {\n    key: \"forward\",\n    value: function forward() {\n      var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (!input) {\n        var index = this.ref.dataset.getCurrentIndex();\n        var data = this.ref.dataset.getData(index);\n        input = data.input;\n      }\n\n      this.inputLayer.setValues(input);\n      this.layers.forEach(function (layer) {\n        return layer.forward();\n      });\n    }\n  }, {\n    key: \"backpropagate\",\n    value: function backpropagate(target) {\n      // create target if not array\n      target = this.ref.dataset.getOutputArray(target); // backpropagate output\n\n      this.outputLayer.neurons.forEach(function (neuron, i) {\n        neuron.calculateError(target[i]);\n      }); // backpropagate hidden layers\n\n      for (var i = this.hiddenLayers.length - 1; i >= 0; i--) {\n        this.hiddenLayers[i].neurons.forEach(function (neuron) {\n          return neuron.calculateError();\n        });\n      } // set new weights\n\n\n      this.layers.forEach(function (layer) {\n        layer.neurons.forEach(function (neuron) {\n          return neuron.backpropagate(LEARNING_RATE);\n        });\n      });\n    }\n  }, {\n    key: \"getError\",\n    value: function getError(target) {\n      target = this.ref.dataset.getOutputArray(target);\n      var error = 0;\n      this.outputLayer.neurons.forEach(function (neuron, i) {\n        error += Math.pow(target[i] - neuron.value, 2);\n      });\n      return error;\n    }\n  }, {\n    key: \"runEpochStep\",\n    value: function runEpochStep(index) {\n      var data = this.ref.dataset.getData(index);\n      this.forward(data.input);\n      this.backpropagate(data.output);\n      this.ref.dataset.setError(index, this.getError(data.output));\n      this.stats.steps += 1;\n    }\n  }, {\n    key: \"runEpochs\",\n    value: function runEpochs() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var samples = this.ref.dataset.getDataSize();\n\n      for (var i = 0; i < n; i++) {\n        var error = 0;\n\n        for (var j = 0; j < samples; j++) {\n          this.runEpochStep(j);\n          error += this.ref.dataset.getError(j);\n        }\n\n        this.stats.totalError = (0,_maths_round__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(error, 4);\n        this.stats.averageError = (0,_maths_round__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(error / samples, 4);\n        this.stats.epochs += 1;\n        this.ref.dataset.shuffleData();\n      }\n    }\n  }, {\n    key: \"forwardSingle\",\n    value: function forwardSingle() {\n      this.forward();\n      var index = this.getOutputValue();\n      console.log(index);\n    }\n  }, {\n    key: \"getOutputValue\",\n    value: function getOutputValue() {\n      var values = this.outputLayer.neurons.map(function (neuron) {\n        return neuron.getValue();\n      }); //let total = values.reduce((a, b) => a + b);\n      //let normalised = values.map(value => value / total);\n      //let max = Math.max(...normalised);\n\n      var max = Math.max.apply(Math, _toConsumableArray(values));\n      var index = values.findIndex(function (value) {\n        return value == max;\n      });\n      return index;\n    }\n  }, {\n    key: \"step\",\n    value: function step() {\n      this.runEpochStep(this.ref.dataset.getCurrentIndex());\n      this.ref.dataset.nextIndex();\n    }\n  }, {\n    key: \"loop\",\n    value: function loop() {\n      var _this2 = this;\n\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (this.looping) {\n        this.looping = false;\n      } else {\n        this.looping = true;\n\n        var callback = function callback() {\n          return new Promise(function (resolve, reject) {\n            _this2.runEpochs(n); // select random data point for visual interest\n\n\n            var index = Math.floor(_this2.ref.dataset.getDataSize() * Math.random());\n\n            var input = _this2.ref.dataset.getData(index).input;\n\n            _this2.forward(input); // refresh\n\n\n            _this2.refresh();\n\n            resolve();\n          });\n        };\n\n        var loopCallback = function loopCallback() {\n          callback().then(function () {\n            if (_this2.looping) {\n              setTimeout(function () {\n                return loopCallback();\n              }, 1);\n            }\n          });\n        };\n\n        loopCallback();\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.layers.forEach(function (layer) {\n        return layer.reset();\n      });\n      this.stats.epochs = 0;\n      this.stats.steps = 0;\n      this.stats.totalError = 0;\n      this.forward(this.ref.dataset.getData(0).input);\n      this.refresh();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.layers.forEach(function (layer) {\n        return layer.refresh();\n      });\n\n      for (var key in this.stats) {\n        this.ref[key].innerText = this.stats[key];\n      }\n\n      this.ref.dataset.refresh();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var json = {\n        layers: this.layers.map(function (layer) {\n          return layer.toJSON();\n        })\n      };\n      return json;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      this.el = {};\n      this.el.layers = (0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        class: 'neural-network__layers'\n      });\n      this.el.controls = (0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        class: 'neural-network__controls'\n      });\n      this.el.stats = (0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        class: 'neural-network__stats'\n      });\n      this.el.inputBox = (0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        class: 'neural-network__input-box'\n      }); // add layers\n\n      this.layers.forEach(function (layer) {\n        _this3.el.layers.appendChild(layer.el);\n      }); // add controls\n\n      var labelCallback = {\n        'RESET': function RESET() {\n          _this3.reset();\n        },\n        'FORWARD>>': function FORWARD() {\n          _this3.forwardSingle();\n        },\n        'STEP+1': function STEP1() {\n          _this3.step();\n        },\n        'EPOCH+1': function EPOCH1() {\n          _this3.runEpochs(1);\n        },\n        'E+100': function E100() {\n          _this3.runEpochs(100);\n        },\n        'E+1K': function E1K() {\n          _this3.runEpochs(1000);\n        },\n        'LOOP+': function LOOP() {\n          _this3.loop(1);\n        },\n        'LOOP+10': function LOOP10() {\n          _this3.loop(10);\n        },\n        'LOOP+50': function LOOP50() {\n          _this3.loop(50);\n        },\n        'MANIFEST {}': function MANIFEST() {\n          console.log(_this3.toJSON());\n        }\n      };\n\n      var _loop = function _loop(key) {\n        var label = key;\n        var callback = labelCallback[key];\n\n        _this3.el.controls.appendChild((0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n          class: 'neural-network__control',\n          innerText: key,\n          addEventListener: {\n            click: function click() {\n              console.log(key);\n              callback();\n\n              _this3.refresh();\n            }\n          }\n        }));\n      };\n\n      for (var key in labelCallback) {\n        _loop(key);\n      } // add stats\n\n\n      for (var _key in this.stats) {\n        var stat = (0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n          class: 'neural-network__stat',\n          innerHTML: \"\".concat(_key, \": <span></span>\")\n        });\n        this.el.stats.appendChild(stat);\n        this.ref[_key] = stat.querySelector('span');\n      } // add inputs\n\n\n      this.el.inputBox.appendChild((0,_util_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        class: 'input-box',\n        children: [{\n          type: 'input',\n          name: 'nn-input'\n        }, {\n          class: 'input-box__button',\n          innerText: '>>',\n          addEventListener: {\n            click: function click() {\n              var v = _this3.el.inputBox.querySelector('input[name=\"nn-input\"]').value;\n\n              var input = v.split(',').map(function (v) {\n                return parseInt(v);\n              });\n\n              _this3.ref.dataset.normalise(input);\n\n              _this3.forward(input);\n\n              var output = _this3.getOutputValue();\n\n              _this3.el.inputBox.querySelector('input[name=\"nn-output\"]').value = output;\n              console.log(v, input, output);\n\n              _this3.refresh();\n            }\n          }\n        }, {\n          type: 'input',\n          name: 'nn-output'\n        }]\n      })); // add to doc\n\n      document.querySelector('#neural-network').appendChild(this.el.layers);\n      document.querySelector('#neural-network').appendChild(this.el.stats);\n      document.querySelector('#neural-network').appendChild(this.el.inputBox);\n      document.querySelector('.neural-network__footer').appendChild(this.el.controls);\n    }\n  }]);\n\n  return NeuralNetwork;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NeuralNetwork);\n\n//# sourceURL=webpack://APP/./src/js/nn/neural_network.js?");

/***/ }),

/***/ "./src/js/nn/neuron.js":
/*!*****************************!*\
  !*** ./src/js/nn/neuron.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _activation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./activation */ \"./src/js/nn/activation.js\");\n/* harmony import */ var _util_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/element */ \"./src/js/util/element.js\");\n/* harmony import */ var _maths_round__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../maths/round */ \"./src/js/maths/round.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** Neuron */\n\n\n\nvar MAX_VISIBLE_NEURONS_PER_LAYER = 12;\n\nvar Neuron = /*#__PURE__*/function () {\n  function Neuron(params) {\n    _classCallCheck(this, Neuron);\n\n    this.params = params;\n    this.error = 0;\n    this.weightedInput = 0;\n    this.value = 0;\n    this.index = params.index;\n    this.bias = params.bias !== undefined ? params.bias : 0;\n    this.activation = params.activation || null;\n    this.connections = {\n      in: [],\n      out: []\n    };\n    this.visible = this.index < MAX_VISIBLE_NEURONS_PER_LAYER;\n    this.render();\n  }\n\n  _createClass(Neuron, [{\n    key: \"getValue\",\n    value: function getValue() {\n      return this.value;\n    }\n  }, {\n    key: \"getWeightedInput\",\n    value: function getWeightedInput() {\n      return this.weightedInput;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.value = value;\n    }\n  }, {\n    key: \"setError\",\n    value: function setError(error) {\n      this.error = error;\n    }\n  }, {\n    key: \"setBias\",\n    value: function setBias(bias) {\n      this.bias = bias;\n    }\n  }, {\n    key: \"addOutgoingConnection\",\n    value: function addOutgoingConnection(conn) {\n      this.connections.out.push(conn);\n\n      if (this.el) {\n        this.el.dataset.outgoing = 1;\n      }\n    }\n  }, {\n    key: \"addIncomingConnection\",\n    value: function addIncomingConnection(conn) {\n      this.connections.in.push(conn);\n\n      if (this.el) {\n        this.el.dataset.incoming = 1;\n      }\n    }\n  }, {\n    key: \"calculateError\",\n    value: function calculateError() {\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      // output layer\n      if (this.connections.out.length == 0) {\n        this.error = (this.value - target) * _activation__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDerivative(this.activation, this.value); // hidden layers\n      } else if (this.connections.in.length > 0) {\n        var error = 0;\n        this.connections.out.forEach(function (conn) {\n          error += conn.getWeightedError();\n        });\n        this.error = error * _activation__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDerivative(this.activation, this.value);\n      }\n    }\n  }, {\n    key: \"backpropagate\",\n    value: function backpropagate() {\n      var _this = this;\n\n      var learningRate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.25;\n\n      if (this.connections.in.length == 0) {\n        return;\n      }\n\n      this.connections.in.forEach(function (conn) {\n        conn.setWeight(conn.weight - learningRate * _this.error * conn.getInput());\n      });\n    }\n  }, {\n    key: \"calculateWeightedInput\",\n    value: function calculateWeightedInput() {\n      var _this2 = this;\n\n      if (!this.connections.in.length) return;\n      this.weightedInput = this.bias;\n      this.connections.in.forEach(function (conn) {\n        _this2.weightedInput += conn.getWeightedValue();\n      });\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      if (!this.connections.in.length) return;\n      this.value = _activation__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getValue(this.activation, this.weightedInput);\n    }\n  }, {\n    key: \"hasOutput\",\n    value: function hasOutput() {\n      return this.connections.out.length > 0;\n    }\n  }, {\n    key: \"isOutputNeuron\",\n    value: function isOutputNeuron() {\n      return this.connections.out.length == 0;\n    }\n  }, {\n    key: \"isInputNeuron\",\n    value: function isInputNeuron() {\n      return this.connections.in.length == 0;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {// ???\n    }\n  }, {\n    key: \"update\",\n    value: function update() {// if input transmit\n      // if forward-feeding\n      // if backpropagating\n      // if output snap value\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.visible) return;\n\n      if (this.label) {\n        this.ref.label.innerText = this.label;\n      }\n\n      this.ref.value.innerText = (0,_maths_round__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this.value, 3);\n      this.ref.error.innerText = this.error == 0 ? '' : (0,_maths_round__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this.error, 5);\n\n      if (!this.connections.in.length) {\n        this.ref.in.classList.add('active');\n        this.ref.in.innerText = (0,_maths_round__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this.value, 3);\n      }\n\n      if (!this.connections.out.length) {\n        this.ref.out.classList.add('active');\n        this.ref.out.innerText = Math.round(this.value);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (!this.visible) return;\n      this.el = (0,_util_element__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n        class: 'neuron',\n        children: [{\n          class: 'neuron__label'\n        }, {\n          class: 'neuron__value'\n        }, {\n          class: 'neuron__error'\n        }, {\n          class: 'neuron__in'\n        }, {\n          class: 'neuron__out'\n        }],\n        addEventListener: {\n          click: function click() {\n            return _this3.el.classList.toggle('selected');\n          }\n        }\n      });\n      this.ref = {};\n      this.ref.label = this.el.querySelector('.neuron__label');\n      this.ref.value = this.el.querySelector('.neuron__value');\n      this.ref.error = this.el.querySelector('.neuron__error');\n      this.ref.in = this.el.querySelector('.neuron__in');\n      this.ref.out = this.el.querySelector('.neuron__out');\n    }\n  }]);\n\n  return Neuron;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neuron);\n\n//# sourceURL=webpack://APP/./src/js/nn/neuron.js?");

/***/ }),

/***/ "./src/js/nn/synapse.js":
/*!******************************!*\
  !*** ./src/js/nn/synapse.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _util_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/element */ \"./src/js/util/element.js\");\n/* harmony import */ var _maths_round__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../maths/round */ \"./src/js/maths/round.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** connection */\n\n\n\nvar Connection = /*#__PURE__*/function () {\n  function Connection(params) {\n    _classCallCheck(this, Connection);\n\n    this.params = params;\n    this.node = {\n      src: params.src || null,\n      dst: params.dst || null\n    };\n    this.weight = params.weight !== undefined ? params.weight : Math.random();\n    this.node.src.addOutgoingConnection(this);\n    this.node.dst.addIncomingConnection(this);\n    this.visible = this.node.src.visible && this.node.dst.visible;\n    this.render();\n  }\n\n  _createClass(Connection, [{\n    key: \"getWeight\",\n    value: function getWeight() {\n      return this.weight;\n    }\n  }, {\n    key: \"setWeight\",\n    value: function setWeight(weight) {\n      this.weight = weight;\n    }\n  }, {\n    key: \"getWeightedValue\",\n    value: function getWeightedValue() {\n      return this.weight * this.node.src.value;\n    }\n  }, {\n    key: \"getInput\",\n    value: function getInput() {\n      return this.node.src.value;\n    }\n  }, {\n    key: \"getWeightedError\",\n    value: function getWeightedError() {\n      return this.weight * this.node.dst.error;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.weight = this.params.weight !== undefined ? this.params.weight : Math.random();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.visible) return; // set connection position, rotation, size\n\n      var rect1 = this.node.src.el.getBoundingClientRect();\n      var rect2 = this.node.dst.el.getBoundingClientRect();\n      var radius = rect1.width / 2;\n      var dx = rect2.left - rect1.left;\n      var dy = rect2.top - rect1.top;\n      var dist = Math.hypot(dx, dy);\n      var theta = Math.atan2(dy, dx);\n      var deg = theta / Math.PI * 180;\n      this.el.style.width = \"\".concat(dist, \"px\");\n      this.el.style.transform = \"translate(0, -50%) rotate(\".concat(deg, \"deg)\");\n      this.ref.inner.style.width = \"\".concat(dist - radius * 2, \"px\");\n      this.ref.weight.style.transform = \"translate(-50%, -50%) rotate(\".concat(-deg, \"deg)\");\n      this.ref.weight.innerText = 'W=' + (0,_maths_round__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.weight, 3);\n      this.ref.inner.style.borderWidth = \"\".concat(0.125 + this.weight * 4, \"px\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.visible) return;\n      this.el = (0,_util_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        class: 'connection',\n        children: [{\n          class: 'connection__inner'\n        }, {\n          class: 'connection__weight'\n        }]\n      }); // refs\n\n      this.ref = {};\n      this.ref.inner = this.el.querySelector('.connection__inner');\n      this.ref.weight = this.el.querySelector('.connection__weight'); // add to from connection\n\n      this.node.src.el.appendChild(this.el);\n    }\n  }]);\n\n  return Connection;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Connection);\n\n//# sourceURL=webpack://APP/./src/js/nn/synapse.js?");

/***/ }),

/***/ "./src/js/util/element.js":
/*!********************************!*\
  !*** ./src/js/util/element.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/** Element */\nvar Element = function Element(prop) {\n  if (prop instanceof HTMLElement) {\n    return prop;\n  }\n\n  var e = document.createElement(prop.type || 'div');\n\n  for (var key in prop) {\n    var value = prop[key];\n\n    switch (key) {\n      case 'class':\n        value.split(' ').forEach(function (c) {\n          return e.classList.add(c);\n        });\n        break;\n\n      case 'eventListener':\n      case 'addEventListener':\n        for (var k in value) {\n          e.addEventListener(k, value[k]);\n        }\n\n        break;\n\n      case 'children':\n      case 'childNodes':\n        if (Array.isArray(value)) value.forEach(function (child) {\n          return e.appendChild(Element(child));\n        });else e.appendChild(Element(value));\n        break;\n\n      case 'attribute':\n        for (var _k in value) {\n          e.setAttribute(_k, value[_k]);\n        }\n\n        break;\n\n      case 'dataset':\n        for (var _k2 in value) {\n          e.dataset[_k2] = value[_k2];\n        }\n\n        break;\n\n      case 'style':\n        for (var _k3 in value) {\n          e.style[_k3] = value[_k3];\n        }\n\n      case 'type':\n        break;\n\n      default:\n        e[key] = value;\n    }\n  }\n\n  return e;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Element);\n\n//# sourceURL=webpack://APP/./src/js/util/element.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/app.js");
/******/ 	APP = __webpack_exports__;
/******/ 	
/******/ })()
;